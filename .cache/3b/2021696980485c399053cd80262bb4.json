{"id":"BfiX","dependencies":[{"name":"C:\\Users\\ricardo\\Desktop\\testInputs\\package.json","includedInParent":true,"mtime":1582215256863},{"name":"strongly-typed-events","loc":{"line":6,"column":38},"parent":"C:\\Users\\ricardo\\Desktop\\testInputs\\src\\Handlers\\GamepadHandler.ts","resolved":"C:\\Users\\ricardo\\Desktop\\testInputs\\node_modules\\strongly-typed-events\\dist\\index.js"},{"name":"lodash","loc":{"line":7,"column":39},"parent":"C:\\Users\\ricardo\\Desktop\\testInputs\\src\\Handlers\\GamepadHandler.ts","resolved":"C:\\Users\\ricardo\\Desktop\\testInputs\\node_modules\\lodash\\lodash.js"},{"name":"./ControllerEnum","loc":{"line":8,"column":31},"parent":"C:\\Users\\ricardo\\Desktop\\testInputs\\src\\Handlers\\GamepadHandler.ts","resolved":"C:\\Users\\ricardo\\Desktop\\testInputs\\src\\Handlers\\ControllerEnum.ts"}],"generated":{"js":"\"use strict\";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,\"__esModule\",{value:!0});var e=require(\"strongly-typed-events\"),n=t(require(\"lodash\")),a=require(\"./ControllerEnum\"),s=function(){function t(){this.onGamepadConnected=new e.SimpleEventDispatcher,this.onGamepadDisconnected=new e.SimpleEventDispatcher,this.buttonsCache=new Map,this.buttonsStatus=new Map,this.axisStatus=new Map,this.leftJoystick=new Map,this.gamepads=[],this.addEventListners()}return t.prototype.update=function(){var t=this,e=navigator.getGamepads?navigator.getGamepads():[];this.buttonsCache.clear(),this.buttonsStatus.forEach(function(e,n){return t.buttonsCache.set(n,e)}),this.buttonsStatus.clear();for(var n=new Map,a=0;a<e.length;a++)if(null!=e[a]){for(var s=[],i=0;i<e[a].buttons.length;i++)s.push(e[a].buttons[i]);n.set(e[a].index,s)}this.buttonsStatus=new Map(n)},t.prototype.getConnectedGamepadsCount=function(){return this.gamepads.length},t.prototype.getConnectedGamepads=function(){return n.default.cloneDeep(this.gamepads)},t.prototype.getButtonPressed=function(t,e,n){if(null==(navigator.getGamepads?navigator.getGamepads():[])[e])return!1;var a=!1,s=this.buttonsStatus.get(e);if(null!=s&&(a=s[t].pressed),!n){var i=this.buttonsCache.get(e);null!=i&&1==i[t].pressed&&(a=!1)}return a},t.prototype.getButtonAxis=function(t,e){return null==(navigator.getGamepads?navigator.getGamepads():[])[e]?0:this.buttonsStatus.get(e)[t].value},t.prototype.getJoystickAxis=function(t,e){var n=[];return t==a.JoySticks.LeftStick&&(n=this.leftJoystick.get(e)),t==a.JoySticks.RightStick&&(n=this.leftJoystick.get(e)),n},t.prototype.getJoyAxis=function(t,e){var n=navigator.getGamepads?navigator.getGamepads():[];if(n[e])return n[e].axes[t]},t.prototype.addEventListners=function(){window.addEventListener(\"gamepadconnected\",function(t){this.updateConnectedGamepads(t,!0)}.bind(this)),window.addEventListener(\"gamepaddisconnected\",function(t){this.updateConnectedGamepads(t,!1)}.bind(this))},t.prototype.updateConnectedGamepads=function(t,e){var n=t.gamepad;e?(this.gamepads.push(n),this.onGamepadConnected.dispatch(t)):(this.gamepads.splice(n.index,1),this.onGamepadDisconnected.dispatch(t))},t}();exports.default=s;"},"sourceMaps":null,"error":null,"hash":"4bf3369e8e7cce35e62a03cf6553ab56","cacheData":{"env":{}}}